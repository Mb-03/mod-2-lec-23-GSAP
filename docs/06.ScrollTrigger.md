## üéØ What is ScrollTrigger?

**ScrollTrigger** makes animations happen when you **scroll the page**. It's like having a **scroll detector** that says:

- "Hey, this element just appeared on screen - animate it!"
- "User scrolled halfway through - do something!"
- "Pin this element while scrolling - like a sticky header!"

### üé¨ Real-World Examples

- **Fade in** elements as you scroll down
- **Parallax effects** (background moves slower than foreground)
- **Progress bars** that fill as you scroll
- **Sticky sections** that pin while scrolling
- **Horizontal scrolling** galleries
- **Reveal animations** for images and text

---

## üìö THEORY: How ScrollTrigger Works

### The Concept

ScrollTrigger watches the **scroll position** and triggers animations when certain conditions are met:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Viewport (your screen)         ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ  ‚îÇ   trigger:       ‚îÇ  ‚Üê When this element
‚îÇ  ‚îÇ   ".box"         ‚îÇ     enters viewport
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ  Animation starts! ‚ú®          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Key Concepts

1. **Trigger Element**: The element that activates the animation
2. **Start Position**: When animation begins (e.g., "top bottom" = element's top hits viewport's bottom)
3. **End Position**: When animation completes
4. **Scrub**: Tie animation progress directly to scroll position
5. **Pin**: Keep element fixed while scrolling

---

## üèóÔ∏è Basic Setup

### Installation & Registration

```javascript
import { useGSAP } from "@gsap/react";
import gsap from "gsap";
import { ScrollTrigger } from "gsap/ScrollTrigger";

gsap.registerPlugin(ScrollTrigger); // ‚Üê MUST register!
```

### Basic ScrollTrigger Animation

```javascript
useGSAP(
  () => {
    gsap.to(".box", {
      x: 200,
      scrollTrigger: ".box", // ‚Üê Trigger when .box enters viewport
    });
  },
  { scope: container }
);
```

---

## ‚öôÔ∏è ScrollTrigger Properties

### 1. **trigger** - What element to watch

```javascript
scrollTrigger: {
  trigger: ".box",  // Watch this element
}
```

### 2. **start** - When to start animation

```javascript
scrollTrigger: {
  start: "top center"; // "trigger viewport"
  // trigger top hits viewport center
}
```

**Start Options:**

- `"top top"` - Element's top hits viewport's top
- `"top center"` - Element's top hits viewport's center
- `"top bottom"` - Element's top hits viewport's bottom
- `"center center"` - Element's center hits viewport's center
- `"bottom top"` - Element's bottom hits viewport's top
- `"top 80%"` - Element's top hits 80% down the viewport
- `"top top+=100"` - 100px offset from top

### 3. **end** - When to end animation

```javascript
scrollTrigger: {
  end: "bottom top"; // End when element's bottom hits viewport's top
}
```

### 4. **scrub** - Tie animation to scroll

```javascript
scrollTrigger: {
  scrub: true; // Animation follows scroll perfectly
  // OR
  scrub: 1; // 1 second smooth delay
}
```

### 5. **markers** - Visual debugging (DEV ONLY!)

```javascript
scrollTrigger: {
  markers: true; // Show start/end markers (remove in production!)
}
```

### 6. **pin** - Keep element fixed

```javascript
scrollTrigger: {
  pin: true; // Pin the element while scrolling
}
```

### 7. **toggleActions** - Control animation playback

```javascript
scrollTrigger: {
  toggleActions: "play none none none";
  // Format: "onEnter onLeave onEnterBack onLeaveBack"
  // Options: play, pause, resume, reset, restart, complete, reverse, none
}
```

**Common Patterns:**

- `"play none none none"` - Play once, never replay
- `"play reverse play reverse"` - Play forward/backward on scroll
- `"play none none reset"` - Play forward, reset on scroll back up

---

## üî• COMPLETE INTERACTIVE EXAMPLE---

## üìñ ScrollTrigger Properties Deep Dive

### **Start & End Positions Explained**

The format is: `"triggerPosition viewportPosition"`

```
Viewport (your screen)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  top (0%)          ‚îÇ
‚îÇ                     ‚îÇ
‚îÇ  center (50%)      ‚îÇ
‚îÇ                     ‚îÇ
‚îÇ  bottom (100%)     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Element
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  top               ‚îÇ
‚îÇ  center            ‚îÇ
‚îÇ  bottom            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Examples:**

```javascript
start: "top bottom"; // Element's top hits viewport's bottom
start: "top center"; // Element's top hits viewport's center
start: "center center"; // Element's center hits viewport's center
start: "bottom top"; // Element's bottom hits viewport's top
start: "top 80%"; // Element's top hits 80% down viewport
start: "top top+=100"; // 100px offset from top
```

---

## üéØ Common ScrollTrigger Patterns

### Pattern 1: **Fade In on Scroll**

```javascript
gsap.from(".element", {
  opacity: 0,
  y: 100,
  duration: 1,
  scrollTrigger: {
    trigger: ".element",
    start: "top 80%",
    toggleActions: "play none none reverse",
  },
});
```

### Pattern 2: **Scrub Animation (Smooth with Scroll)**

```javascript
gsap.to(".element", {
  x: 500,
  scrollTrigger: {
    trigger: ".element",
    start: "top center",
    end: "bottom center",
    scrub: true, // Or scrub: 1 for smoothing
  },
});
```

### Pattern 3: **Pin Section While Animating**

```javascript
gsap.to(".element", {
  rotation: 360,
  scale: 2,
  scrollTrigger: {
    trigger: ".section",
    start: "top top",
    end: "+=500", // Pin for 500px of scroll
    pin: true,
    scrub: 1,
  },
});
```

### Pattern 4: **Horizontal Scroll Gallery**

```javascript
const sections = gsap.utils.toArray(".panel");

gsap.to(sections, {
  xPercent: -100 * (sections.length - 1),
  ease: "none",
  scrollTrigger: {
    trigger: ".container",
    pin: true,
    scrub: 1,
    end: () => "+=" + document.querySelector(".container").offsetWidth,
  },
});
```

### Pattern 5: **Parallax Background**

```javascript
gsap.to(".background", {
  y: 300,
  ease: "none",
  scrollTrigger: {
    trigger: ".section",
    start: "top bottom",
    end: "bottom top",
    scrub: true,
  },
});
```

---

## üé® Advanced Techniques

### 1. **Batch Animations** (Multiple elements)

```javascript
ScrollTrigger.batch(".box", {
  onEnter: (batch) => gsap.to(batch, { opacity: 1, y: 0, stagger: 0.15 }),
  onLeave: (batch) => gsap.to(batch, { opacity: 0, y: 100 }),
  onEnterBack: (batch) => gsap.to(batch, { opacity: 1, y: 0 }),
  onLeaveBack: (batch) => gsap.to(batch, { opacity: 0, y: -100 }),
  start: "top 80%",
  end: "top 20%",
});
```

### 2. **Callbacks**

```javascript
scrollTrigger: {
  trigger: ".element",
  start: "top center",
  onEnter: () => console.log("Entered!"),
  onLeave: () => console.log("Left!"),
  onEnterBack: () => console.log("Scrolled back up!"),
  onLeaveBack: () => console.log("Left going up!"),
  onUpdate: (self) => console.log("Progress:", self.progress)
}
```

### 3. **Snap to Sections**

```javascript
scrollTrigger: {
  trigger: ".section",
  start: "top top",
  end: "bottom top",
  pin: true,
  snap: {
    snapTo: 1 / 4,  // Snap to quarters (0, 0.25, 0.5, 0.75, 1)
    duration: 0.5,
    ease: "power1.inOut"
  }
}
```

### 4. **Toggle CSS Classes**

```javascript
scrollTrigger: {
  trigger: ".element",
  start: "top center",
  toggleClass: "active",  // Add/remove "active" class
  // OR
  toggleClass: { targets: ".other", className: "highlight" }
}
```

---

## üîß ScrollTrigger Methods

```javascript
const st = ScrollTrigger.create({
  trigger: ".element",
  start: "top center",
});

// Control methods
st.kill(); // Destroy ScrollTrigger
st.enable(); // Enable
st.disable(); // Disable
st.refresh(); // Recalculate positions

// Global methods
ScrollTrigger.refresh(); // Refresh all ScrollTriggers
ScrollTrigger.update(); // Update all
ScrollTrigger.getAll(); // Get all instances
ScrollTrigger.getById("myId"); // Get specific instance
```

---

## üí° Pro Tips & Best Practices

### 1. **Use `markers: true` for Debugging** (Remove in Production!)

```javascript
scrollTrigger: {
  markers: true; // Shows visual markers for start/end
}
```

### 2. **Refresh After Dynamic Content**

```javascript
// After loading images or changing layout
ScrollTrigger.refresh();
```

### 3. **Mobile Optimization**

```javascript
scrollTrigger: {
  start: "top 80%",
  end: "top 20%",
  // Disable on mobile if performance is an issue
  // Use matchMedia for responsive behavior
}

ScrollTrigger.matchMedia({
  "(min-width: 768px)": function() {
    // Desktop animations
  },
  "(max-width: 767px)": function() {
    // Mobile animations (simpler)
  }
});
```

### 4. **Cleanup in React**

```javascript
useGSAP(
  () => {
    const tl = gsap.timeline({
      scrollTrigger: {
        trigger: ".element",
        start: "top center",
      },
    });

    // Cleanup happens automatically with useGSAP!
  },
  { scope: container }
);
```

### 5. **Performance: Use `will-change` CSS**

```css
.animated-element {
  will-change: transform, opacity;
}
```

---

## ‚ö†Ô∏è Common Mistakes to Avoid

### ‚ùå DON'T: Forget to register plugin

```javascript
// This will NOT work!
gsap.to(".box", {
  scrollTrigger: ".box",
});
```

### ‚úÖ DO: Register ScrollTrigger

```javascript
import { ScrollTrigger } from "gsap/ScrollTrigger";
gsap.registerPlugin(ScrollTrigger);
```

### ‚ùå DON'T: Use markers in production

```javascript
scrollTrigger: {
  markers: true; // Remove this before deploying!
}
```

### ‚ùå DON'T: Forget to refresh after layout changes

```javascript
// After images load, content changes, etc.
ScrollTrigger.refresh();
```

---

## üìä ScrollTrigger Cheat Sheet

| Property        | Description      | Example                     |
| --------------- | ---------------- | --------------------------- |
| `trigger`       | Element to watch | `trigger: ".box"`           |
| `start`         | When to start    | `start: "top center"`       |
| `end`           | When to end      | `end: "bottom top"`         |
| `scrub`         | Tie to scroll    | `scrub: true` or `scrub: 1` |
| `pin`           | Pin element      | `pin: true`                 |
| `markers`       | Debug markers    | `markers: true`             |
| `toggleActions` | Play controls    | `"play none none reverse"`  |
| `toggleClass`   | Add/remove class | `toggleClass: "active"`     |
| `snap`          | Snap to points   | `snap: 1/3`                 |

---

## üéì Summary

**ScrollTrigger = Scroll-Based Animation Controller**

- **Basic**: Trigger animations when elements enter viewport
- **Scrub**: Tie animation progress directly to scroll position
- **Pin**: Keep elements fixed while scrolling
- **Parallax**: Different scroll speeds for depth
- **Horizontal**: Scroll vertically to move horizontally

**Key Concepts:**

- `start` = when animation begins
- `end` = when animation completes
- `scrub` = smooth scroll-tied animation
- `pin` = sticky positioning
- `toggleActions` = control playback behavior
